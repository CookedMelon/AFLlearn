## 概要 :
文章提出了一种用于机器学习框架的约束引导模糊测试方法ConFL，通过自动从内核代码中提取约束条件，生成有效输入并探索更深层次的代码路径，以提高模糊测试的效率和发现潜在漏洞的能力。重点是检测机器学习框架中使用的运算符的漏洞。
### 背景:
**论文背景**: 随着机器学习在各个领域中用于自动决策的重要性日益增长，人们对机器学习框架的潜在漏洞产生了关注。然而，由于机器学习框架的复杂实现，对其进行测试是一项艰巨的任务。
**过去方案**: 以往对机器学习框架进行模糊测试的研究在提取输入约束和生成有效输入方面存在困难，导致模糊测试时间长或无法发现目标崩溃。
**论文创新**: 鉴于过去方法的局限性，该文章提出了一种新的约束引导模糊测试方法ConFL，通过自动从内核代码中提取约束条件，并生成有效输入，以提高模糊测试的效率和发现潜在漏洞的能力。文章的目的是解决机器学习框架测试中的困难，提高测试效率和安全性。
**验证**:在TensorFlow上评估了性能，能覆盖更多的代码，生成更先进的有效输入。在Tensorflow中共发现84个之前未知的错误，3个严重级别，13个高危级别。


### 介绍:

本文介绍了一种用于机器学习框架的约束引导模糊测试工具ConFL。ConFL能够自动从内核代码中提取约束条件，生成基于这些约束条件的有效输入，并使用分组技术提高模糊测试的效率。通过在TensorFlow上的评估，证明了ConFL的有效性，它优于现有的模糊测试工具，并发现了84个以前未知的漏洞。
### 背景问题
#### 重点：
文章的重点是检测机器学习框架中使用的运算符的漏洞。运算符是对张量或数据数组执行数学计算的函数或操作。执行诸如卷积运算或池化运算，运算符通常用C/C++实现，并为用户提供python接口。
#### 问题
模糊测试操作符比模糊测试软件系统更难，这是因为操作符函数的复杂性，一是因为有文件管理和计算等各种任务，二是因为在CPU，GPU这种不同架构上也有区别，三是生成有意义和多样化的高维输入也很困难。
#### 实例
将BTCBFS操作符如下填充测试数据，在运行测试脚本时遇到类型错误信息：`InvalidArgumentError: hessian dim should be < 0, got -1`
![Alt text](../../../assets/image-1.png)


### 技术路线:
**重点**：为运算符生成语义有效的测试输入。而从API文档中提取出的约束是不完整且需要领域知识，所以从源代码中自动提取约束，利用约束生成有效的测试输入。为此开发了ConFL原型工具。

ConFL工具由三个模块组成：Operator Collection、Constraints Extraction和Template Generation。
- Operator Collection模块收集机器学习框架中的操作符信息，包括操作符名称、调用链和参数名称。
- Constraints Extraction模块从源代码中提取约束条件，并将其分类为环境约束、依赖约束、验证约束和逻辑约束。
- Template Generation模块利用收集到的操作符信息和约束条件生成模糊测试模板，提供操作符在具体测试之前的抽象表示。

#### 方法
1. TensorFlow等机器学习框架可以在逻辑上分为前后端，C/C++做后端，Python做前端，





### 详细的实验设置:

实验在一台配备Intel Xeon E5-2630 2.20 GHz CPU、Tesla P4 GPU、128GB RAM、Ubuntu 20.04 LTS和Python 3.8的机器上进行。实验重点评估了TensorFlow 2.8，并使用第3章介绍的方法进行评估。实验旨在回答四个研究问题：RQ1 - ConFL在收集操作符方面的效果如何？RQ2 - 操作符约束对参数生成是否有帮助？RQ3 - ConFL能否在实际应用中发现漏洞？
### 详细的实验结果:

评估了ConFL在收集操作符方面的效果，发现ConFL共收集到1,355个操作符，其中1,331个操作符是有效的。操作符约束对于生成有效输入是有帮助的，显著提高了执行成功率。与现有的模糊测试工具相比，ConFL在代码覆盖率方面取得了更好的效果，证明了其在生成有效输入和探索更广泛的代码路径方面的有效性。在漏洞检测方面，ConFL成功地在TensorFlow框架中发现了84个漏洞，所有这些漏洞都已经得到确认并分配了CVE编号。
**Note**: